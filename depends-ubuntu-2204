#!/bin/bash
# Ubuntu 22.04 编译 OpenWrt 所需依赖包
# 用于解决编译过程中的依赖问题

echo "安装 Ubuntu 22.04 编译 OpenWrt 所需依赖..."

# 更新包列表
sudo apt-get update

# 基础编译工具
sudo apt-get install -y \
    build-essential \
    gcc \
    g++ \
    make \
    cmake \
    autoconf \
    automake \
    libtool \
    pkg-config

# 开发库
sudo apt-get install -y \
    libssl-dev \
    libncurses5-dev \
    libncursesw5-dev \
    zlib1g-dev \
    gawk \
    gettext \
    git \
    libxml2-utils \
    xsltproc \
    unzip \
    python3 \
    python3-distutils \
    python3-setuptools \
    python3-pip \
    rsync \
    curl \
    wget \
    subversion \
    flex \
    bison \
    gperf \
    liblz4-tool \
    zstd \
    libzstd-dev \
    liblzma-dev \
    liblzma5 \
    libbz2-dev \
    libbz2-1.0 \
    libffi-dev \
    libffi8 \
    libgmp-dev \
    libgmp10 \
    libmpfr-dev \
    libmpfr6 \
    libmpc-dev \
    libmpc3 \
    libc6-dev \
    libc6-dev-i386 \
    lib32gcc-s1 \
    lib32stdc++6 \
    libc6-dev-armhf-cross \
    libc6-dev-arm64-cross \
    gcc-arm-linux-gnueabihf \
    gcc-aarch64-linux-gnu \
    gcc-multilib \
    g++-multilib \
    libelf-dev \
    libelf1 \
    libdw-dev \
    libdw1 \
    libiberty-dev \
    libiberty1 \
    binutils-dev \
    binutils-arm-linux-gnueabihf \
    binutils-aarch64-linux-gnu \
    file \
    libfuse-dev \
    libfuse2 \
    libfuse3-dev \
    libfuse3-3 \
    libattr1-dev \
    libattr1 \
    libacl1-dev \
    libacl1 \
    libcap-dev \
    libcap2 \
    libcap2-bin \
    libseccomp-dev \
    libseccomp2 \
    libpam0g-dev \
    libpam0g \
    libpam-modules \
    libpam-modules-bin \
    libdb-dev \
    libdb5.3-dev \
    libdb5.3 \
    libdbus-1-dev \
    libdbus-1-3 \
    libglib2.0-dev \
    libglib2.0-0

# 清理缓存
sudo apt-get clean
sudo apt-get autoremove -y

echo "依赖安装完成！"
echo "现在可以开始编译 OpenWrt 了"
